

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Basics &mdash; STKO Python API  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=8a89d2a5" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3. Objects" href="../3_objects/index.html" />
    <link rel="prev" title="1. Call Types" href="../1_call-types/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_api/index.html">Python API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_call-types/index.html">1. Call Types</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#utilities">2.1. Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-output">2.2. Input/Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#units">2.3. Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="#math">2.4. Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fx">2.5. Fx</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-cascade">2.6. Open Cascade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fxoccshape">2.6.1. FxoccShape</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fxoccbuilder">2.6.2. FxoccBuilder</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fxoccquery">2.6.3. FxoccQuery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#qt">2.7. Qt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chart">2.8. Chart</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3_objects/index.html">3. Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_document/index.html">4. Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_mesh/index.html">5. Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../6_fiber-section/index.html">6. Fiber Section</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_cae-document/index.html">7. Cae document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../8_post-processing/index.html">8. Post Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../9_application/index.html">9. Application</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">STKO Python API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">2. Basics</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basics">
<h1>2. Basics<a class="headerlink" href="#basics" title="Link to this heading"></a></h1>
<p>In this section a few basic examples on how to use the most simple classes and functions in <a class="reference external" href="../../_api/_modules/PyMpc.html">PyMpc</a> are provided.</p>
<p>In the subsections you will find code snippets that you can directly test in your STKO, by copy-pasting them in the Scripting Interface.</p>
<section id="utilities">
<h2>2.1. Utilities<a class="headerlink" href="#utilities" title="Link to this heading"></a></h2>
<p>In the <a class="reference external" href="../../_api/_modules/PyMpc.Utils.html">Utils</a> sub-module, two useful functions to query the directory of the STKO application and the OpenSees external solvers are provided. They can be used as following.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyMpc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">get_app_dir</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Utils</span><span class="o">.</span><span class="n">get_external_solvers_dir</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>Most likely the following will appear in the Terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Program</span> <span class="n">Files</span><span class="o">/</span><span class="n">STKO</span>
<span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Program</span> <span class="n">Files</span><span class="o">/</span><span class="n">STKO</span>\<span class="n">external_solvers</span>
</pre></div>
</div>
</section>
<section id="input-output">
<h2>2.2. Input/Output<a class="headerlink" href="#input-output" title="Link to this heading"></a></h2>
<p>In the <a class="reference external" href="../../_api/_modules/PyMpc.IO.html">IO</a> sub-module, three additional functions allow the user to color-code the output text in the terminal. These functions can be useful for checking operations in long text outputs.</p>
<p>An example on how they can be used in STKO. Try it yourself and observe the output in the Terminal.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyMpc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">IO</span><span class="o">.</span><span class="n">write_cout</span><span class="p">(</span><span class="s2">&quot;This is an output&quot;</span><span class="p">)</span>
<span class="n">IO</span><span class="o">.</span><span class="n">write_clog</span><span class="p">(</span><span class="s2">&quot;This is an log&quot;</span><span class="p">)</span>
<span class="n">IO</span><span class="o">.</span><span class="n">write_cerr</span><span class="p">(</span><span class="s2">&quot;This is an error&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Specifically write_cerr can be used to raise exceptions in try loops and allow better readability of the output. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyMpc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">IO</span><span class="o">.</span><span class="n">write_cerr</span><span class="p">(</span><span class="s2">&quot;Exception: variable x is not defined&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="units">
<h2>2.3. Units<a class="headerlink" href="#units" title="Link to this heading"></a></h2>
<p>The classes and methods in the Units sub-module of PyMpc are defined to allow the user to interact with the unit system. As it is known, OpenSees does not have the concept of unit system, so it is common practice to choose a set of reference units before starting the model and keep consistency with the units of each input. In this sub-module, a reference unit system was created, according to the International System of Units, and a few essential base and derived units were defined. There is the potential for the user to define a customized unit system and interact with it in the scripting interface, but it is still in a development phase. Hereafter, an example of what it is possible to do now with the Math sub-module.</p>
<p>An example of how to interact with the unit already defined in the sub-module is provided below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyMpc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">PyMpc.Units</span> <span class="k">as</span> <span class="nn">u</span>

<span class="n">App</span><span class="o">.</span><span class="n">clearTerminal</span><span class="p">()</span>

<span class="n">L</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">L</span>         <span class="c1">#base unit length [meter]</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">t</span>         <span class="c1">#base unit time [second]</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">T</span>         <span class="c1">#base unit temperature [Celsius]</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">Angle</span>     <span class="c1">#derived unit angle [radian]</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">F</span>         <span class="c1">#derived unit force [Newton]</span>
<span class="n">P</span> <span class="o">=</span> <span class="n">F</span><span class="o">/</span><span class="p">(</span><span class="n">L</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>    <span class="c1">#unit pressure [Pascal]</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;The reference unit of pressure (Pascal):&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">P</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">clearTerminal()</span></code> is a function of the sub-module <a class="reference external" href="../../_api/_modules/PyMpc.App.html">App</a> used to clear the terminal from previous printed output.</p>
</div>
<p>This is the output you’ll obtain in the Terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">reference</span> <span class="n">unit</span> <span class="n">of</span> <span class="n">pressure</span> <span class="p">(</span><span class="n">Pascal</span><span class="p">):</span>
             <span class="n">Dimension</span><span class="p">:</span>                         <span class="n">F</span><span class="o">/</span><span class="n">L</span><span class="o">^</span><span class="mi">2</span>
         <span class="n">Current</span> <span class="n">units</span><span class="p">:</span>              <span class="mi">1</span>          <span class="n">N</span><span class="o">/</span><span class="n">m</span><span class="o">^</span><span class="mi">2</span>
        <span class="n">Internal</span> <span class="n">units</span><span class="p">:</span>              <span class="mi">1</span>          <span class="n">N</span><span class="o">/</span><span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="math">
<h2>2.4. Math<a class="headerlink" href="#math" title="Link to this heading"></a></h2>
<p>The sub-module Math in PyMpc provides vector and matrix objects, available for 2, 3, 4 and n dimensions. These classes allow for mathematical operations such as dot and cross products, transpose or transformation to quaternion (for 4D). Also classes for vertex elements and quaternions are provided. Classes called for example mat_array are exported from STKO source code in C++. They behave as a list in Python, allowing concatenation, repetition, slicing, appending, and any other operation available on list objects in Python. The presence of these classesin the sub-module Math, allows interoperability between the strongly typed elements in STKO source code and the Python scripting interface.</p>
<p>We suggest to import the Math sub-module as following, to avoid overlapping with variable names.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">PyMpc.Math</span> <span class="k">as</span> <span class="nn">m</span>
</pre></div>
</div>
</section>
<section id="fx">
<h2>2.5. Fx<a class="headerlink" href="#fx" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At this stage the classes referring to the graphic representation for OpenGL still need to be documented.</p>
</div>
</section>
<section id="open-cascade">
<h2>2.6. Open Cascade<a class="headerlink" href="#open-cascade" title="Link to this heading"></a></h2>
<p>In PyMpc, there are a set of functions and classes to interact wit the CAD environment and directly query geometries, build new elements and interact with existing ones. To separate these set of classes and functions from the rest, three separate sub-modules have been developed: FxoccShape, FxoccQuery, FxoccShape. Where “occ” stands for Open Cascade and “Fx” for graphic representation for OpenGl.</p>
<section id="fxoccshape">
<h3>2.6.1. FxoccShape<a class="headerlink" href="#fxoccshape" title="Link to this heading"></a></h3>
<p>In the sub-module FxoccShape, there are utilities to generate Open Cascade data for CAD, in terms of shapes, curves and surfaces.</p>
</section>
<section id="fxoccbuilder">
<h3>2.6.2. FxoccBuilder<a class="headerlink" href="#fxoccbuilder" title="Link to this heading"></a></h3>
<p>The sub-module FxoccBuilder includes functions to create vertices, edges and faces and creating from them wires, compounds and shells. An example on how to use this sub-module will be provided in section Geometries.</p>
</section>
<section id="fxoccquery">
<h3>2.6.3. FxoccQuery<a class="headerlink" href="#fxoccquery" title="Link to this heading"></a></h3>
<p>In the sub-module FxoccQuery the class DistanceInfo and method computeDistance can be used to query information on the distance of two FxOccShape instances. The following example will illustrate how to create new geometric elements in the Preprocessor environment and successively query information about their respective position.</p>
<p>First let’s initialize our script and call the MpcCaeDocument class and assign it to the variable doc.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyMpc</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">App</span><span class="o">.</span><span class="n">clearTerminal</span><span class="p">()</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">caeDocument</span><span class="p">()</span>
</pre></div>
</div>
<p>All geometries created need to be indexed. To ensure consistency between existing indices and new ones follow these steps (further explanation is provided in section Geometries)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">geometries</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_id</span><span class="p">():</span>
    <span class="k">global</span> <span class="nb">id</span>
    <span class="nb">id</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="nb">id</span>
</pre></div>
</div>
<p>Let’s create two edges, a vertical one and an horizontal one.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="n">FxOccBuilder</span><span class="o">.</span><span class="n">makeVertex</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">FxOccBuilder</span><span class="o">.</span><span class="n">makeVertex</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">e1</span> <span class="o">=</span> <span class="n">FxOccBuilder</span><span class="o">.</span><span class="n">makeEdge</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span>

<span class="n">v3</span> <span class="o">=</span> <span class="n">FxOccBuilder</span><span class="o">.</span><span class="n">makeVertex</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">v4</span> <span class="o">=</span> <span class="n">FxOccBuilder</span><span class="o">.</span><span class="n">makeVertex</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">e2</span> <span class="o">=</span> <span class="n">FxOccBuilder</span><span class="o">.</span><span class="n">makeEdge</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="n">v4</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_geom</span><span class="p">(</span><span class="n">MpcGeometry</span><span class="p">(</span><span class="n">get_id</span><span class="p">(),</span> <span class="s2">&quot;Shape1&quot;</span><span class="p">,</span> <span class="n">e1</span><span class="p">))</span>
<span class="n">add_geom</span><span class="p">(</span><span class="n">MpcGeometry</span><span class="p">(</span><span class="n">get_id</span><span class="p">(),</span> <span class="s2">&quot;Shape2&quot;</span><span class="p">,</span> <span class="n">e2</span><span class="p">))</span>
</pre></div>
</div>
<p>Finally, compute the distance between two shapes and then query information on it. The distance will be 0.0, and the parameters p1 and p2 will coincide in each solution, given that there is an intersection between the two shapes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">info</span> <span class="o">=</span> <span class="n">FxOccQuery</span><span class="o">.</span><span class="n">computeDistance</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done:&#39;</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">done</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Inside:&#39;</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">inside</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Distance:&#39;</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">minimumDistance</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of solutions&#39;</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">numberOfSolutions</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">numberOfSolutions</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Info p1[</span><span class="si">{}</span><span class="s2">]:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="n">info</span><span class="o">.</span><span class="n">p1</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Info p2[</span><span class="si">{}</span><span class="s2">]:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="n">info</span><span class="o">.</span><span class="n">p2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
<p>The following will appear in the terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Done</span><span class="p">:</span> <span class="kc">True</span>
<span class="n">Inside</span><span class="p">:</span> <span class="kc">False</span>
<span class="n">Distance</span><span class="p">:</span> <span class="mf">0.0</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">solutions</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Info</span> <span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="p">[</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Info</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="p">[</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Info</span> <span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="p">[</span><span class="mi">100</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Info</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="p">[</span><span class="mi">100</span><span class="p">;</span><span class="mi">0</span><span class="p">;</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="qt">
<h2>2.7. Qt<a class="headerlink" href="#qt" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Coming soon.</p>
</div>
</section>
<section id="chart">
<h2>2.8. Chart<a class="headerlink" href="#chart" title="Link to this heading"></a></h2>
<p>Three classes to call and create new Chart and ChartData are included in PyMpc. Namely: MpcChart, MpcChartData, MpcChartDataGraphicItem. The following script will illustrate how to create new elements for each of these classes. Start out as follows and use the postDocument function from the App sub-module to call the open .spd document. Then you can use a series of methods of the MpcPostDocument class, as the .spd document is an instance of that class, to clear the existing post processing session, commit the changes and set the document to dirty, so STKO will ask you to save before you close.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyMpc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">postDocument</span><span class="p">()</span>

<span class="n">doc</span><span class="o">.</span><span class="n">clearCharts</span><span class="p">()</span>
<span class="n">doc</span><span class="o">.</span><span class="n">clearChartData</span><span class="p">()</span>
<span class="n">doc</span><span class="o">.</span><span class="n">commitChanges</span><span class="p">()</span>
<span class="n">doc</span><span class="o">.</span><span class="n">dirty</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>To illustrate the creation in turn of new chart data sets, new chart data items to input in the charts and finally new charts, a for loop of 10 iterations has been set as follows. In the first block of code inside the loop a new MpcChartData instance is created, and several attributes are assigned to it: an id, a name, and labels for the x and y axis. Random values are assigned to x and y in this example, but the user could choose to call an data from the .spd file or even call data saved externally. For example, with this method it will be possible to operate comparisons directly inside STKO with experimental data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="nb">iter</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">cdata</span> <span class="o">=</span> <span class="n">MpcChartData</span><span class="p">()</span>
    <span class="n">cdata</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">genNextIdForChartData</span><span class="p">()</span>
    <span class="n">cdata</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Test Chart Data </span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">iter</span>
    <span class="n">cdata</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="s2">&quot;XData&quot;</span>
    <span class="n">cdata</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="s2">&quot;YData&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="nb">iter</span><span class="p">),</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">+</span><span class="nb">float</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span><span class="o">/</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">cdata</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">double_array</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">cdata</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="n">double_array</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">addChartData</span><span class="p">(</span><span class="n">cdata</span><span class="p">)</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">commitChanges</span><span class="p">()</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">dirty</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">cdata</span><span class="p">)</span>
    <span class="n">App</span><span class="o">.</span><span class="n">processEvents</span><span class="p">()</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
<p>After, always writing inside the for loop, an MpcChartDataGraphicItem for cdata is instantiated. It is necessary to create an instance of this class in order to visualize the chart data in the chart. Attributes such as color, thickness and penStyle of the item can be assigned.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cdata_item</span> <span class="o">=</span> <span class="n">MpcChartDataGraphicItem</span><span class="p">(</span><span class="n">cdata</span><span class="p">)</span>
<span class="n">cdata_item</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">MpcQColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
<span class="n">cdata_item</span><span class="o">.</span><span class="n">thickness</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">cdata_item</span><span class="o">.</span><span class="n">penStyle</span> <span class="o">=</span> <span class="n">MpcQPenStyle</span><span class="o">.</span><span class="n">SolidLine</span>
<span class="n">Finally</span> <span class="n">the</span> <span class="n">chart</span> <span class="ow">is</span> <span class="n">created</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">chart</span> <span class="n">data</span> <span class="nb">set</span> <span class="ow">is</span> <span class="n">added</span> <span class="n">to</span> <span class="n">it</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">MpcChart</span><span class="p">()</span>
<span class="n">chart</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">genNextIdForChart</span><span class="p">()</span>
<span class="n">chart</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Test Chart&quot;</span>
<span class="n">chart</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">cdata_item</span><span class="p">)</span>
<span class="n">doc</span><span class="o">.</span><span class="n">addChart</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
<span class="n">doc</span><span class="o">.</span><span class="n">commitChanges</span><span class="p">()</span>
<span class="n">doc</span><span class="o">.</span><span class="n">dirty</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">doc</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
<span class="n">App</span><span class="o">.</span><span class="n">processEvents</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024 Asdea Software.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>